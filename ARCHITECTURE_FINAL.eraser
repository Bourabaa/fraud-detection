---
title: Fraud Detection System - Architecture ComplÃ¨te OptimisÃ©e
---

# Architecture ComplÃ¨te - Pipeline de DÃ©ploiement

```mermaid
graph LR
    subgraph COL1["PHASE 1: IAM"]
        direction TB
        IAM[ğŸ‘¤ IAM User<br/>AWS Access Keys<br/>S3 + SageMaker Permissions]
        IAMRole[ğŸ” IAM Role<br/>SageMaker Execution Role<br/>ARN: arn:aws:iam::*:role/...]
        IAM --> IAMRole
    end

    subgraph COL2["PHASE 2: ML Prep"]
        direction TB
        Notebook[ğŸ““ Jupyter Notebook<br/>credit_card_fraud_detection_fixed.ipynb]
        DataLoad[ğŸ“Š Chargement DonnÃ©es<br/>creditcard.csv<br/>284,807 transactions<br/>31 colonnes]
        DataPrep[ğŸ”§ PrÃ©paration<br/>Balance: 492 fraud + 492 legit<br/>Train/Test: 70/30]
        Script[ğŸ“ script.py<br/>RandomForest Classifier<br/>model_fn + training]
        S3Upload[â˜ï¸ Upload S3<br/>train.csv + test.csv<br/>Bucket: deployment-s3-bucket]
        
        Notebook --> DataLoad
        DataLoad --> DataPrep
        DataPrep --> Script
        Script --> S3Upload
    end

    subgraph COL3["PHASE 3: Training"]
        direction TB
        Estimator[âš™ï¸ Estimator<br/>SKLearn Framework 0.23-1<br/>Instance: ml.c5.xlarge]
        Training[ğŸ‹ï¸ Training Job<br/>RF-fraud-detection-*<br/>DurÃ©e: ~73 secondes]
        ModelArtifact[ğŸ“¦ Model Artifact<br/>S3: model.tar.gz<br/>Contient: model.joblib]
        
        S3Upload --> Estimator
        Estimator --> Training
        Training --> ModelArtifact
    end

    subgraph COL4["ğŸŸ  AWS SageMaker"]
        direction TB
        SageMakerModel[ğŸ¤– SageMaker Model<br/>fraud-detection-model-*<br/>Entry point: script.py]
        Endpoint[ğŸš€ SageMaker Endpoint<br/>ml.t2.medium<br/>Status: InService<br/>âš ï¸ ~$0.05/heure]
        
        ModelArtifact --> SageMakerModel
        SageMakerModel --> Endpoint
    end

    subgraph COL5["PHASE 5: Backend"]
        direction TB
        BackendCode[ğŸ’» Backend Code<br/>Node.js/Express<br/>server.js + metrics.js]
        EBDeploy[ğŸ“¤ Elastic Beanstalk<br/>Platform: Node.js<br/>Instance: t2.micro]
        BackendAPI[ğŸŒ Backend API<br/>POST /api/predict<br/>HTTP: frauddetection-env.eba-*]
        
        BackendCode --> EBDeploy
        EBDeploy --> BackendAPI
    end

    subgraph COL6["ğŸŸ  AWS Lambda"]
        direction TB
        LambdaCode[âš¡ Lambda Code<br/>index-simple.js<br/>Proxy Function]
        LambdaDeploy[ğŸ“¤ Lambda Deploy<br/>Runtime: Node.js 20.x<br/>Function URL]
        LambdaURL[ğŸ”— Lambda Function URL<br/>HTTPS Proxy<br/>CORS: Enabled]
        
        LambdaCode --> LambdaDeploy
        LambdaDeploy --> LambdaURL
    end

    subgraph COL7["PHASE 7: Frontend"]
        direction TB
        ReactCode[âš›ï¸ React Code<br/>App.js + Tailwind CSS<br/>Input: Manuel + CSV]
        AmplifyDeploy[ğŸ“¤ AWS Amplify<br/>Build: npm run build<br/>Deploy automatique]
        Frontend[ğŸŒ Frontend Web<br/>HTTPS: *.amplifyapp.com<br/>Env: REACT_APP_API_URL]
        
        ReactCode --> AmplifyDeploy
        AmplifyDeploy --> Frontend
    end

    subgraph COL8["PHASE 8: Monitoring"]
        direction TB
        CloudWatch[ğŸ“Š CloudWatch<br/>MÃ©triques & Logs<br/>Namespace: FraudDetection/API]
        Grafana[ğŸ“ˆ Grafana Cloud<br/>Dashboards & Alerts<br/>Data Source: CloudWatch]
        
        CloudWatch --> Grafana
    end

    IAMRole -.->|Permissions| Estimator
    IAMRole -.->|Permissions| SageMakerModel
    IAMRole -.->|Permissions| Endpoint
    
    Endpoint -->|invokeEndpoint| BackendAPI
    BackendAPI -->|Proxy HTTP| LambdaURL
    LambdaURL -->|HTTPS| Frontend
    
    BackendAPI -->|MÃ©triques| CloudWatch
    LambdaURL -->|Logs| CloudWatch

    style COL1 fill:#f0f0f0,stroke:#333,stroke-width:2px
    style COL2 fill:#f0f0f0,stroke:#333,stroke-width:2px
    style COL3 fill:#f0f0f0,stroke:#333,stroke-width:2px
    style COL4 fill:#ff9500,stroke:#ff6600,stroke-width:3px,color:#fff
    style COL5 fill:#f0f0f0,stroke:#333,stroke-width:2px
    style COL6 fill:#ff9900,stroke:#ff7700,stroke-width:3px,color:#fff
    style COL7 fill:#f0f0f0,stroke:#333,stroke-width:2px
    style COL8 fill:#f0f0f0,stroke:#333,stroke-width:2px
```

## Architecture en Colonnes

Le diagramme est organisÃ© en **8 colonnes verticales** reprÃ©sentant chaque phase :

### Colonne 1: Setup IAM
- CrÃ©ation IAM User et Role
- Configuration des permissions

### Colonne 2: PrÃ©paration ML
- Notebook Jupyter
- Chargement et prÃ©paration des donnÃ©es
- Upload vers S3

### Colonne 3: EntraÃ®nement
- Configuration Estimator
- Training Job SageMaker
- Model Artifact

### Colonne 4: ğŸŸ  AWS SageMaker (Orange)
- **Service AWS SageMaker** - Couleur orange pour identification
- CrÃ©ation du modÃ¨le SageMaker
- DÃ©ploiement de l'endpoint ML
- âš ï¸ CoÃ»t: ~$0.05/heure (supprimer aprÃ¨s test!)

### Colonne 5: Backend
- Code Node.js/Express
- DÃ©ploiement Elastic Beanstalk
- API REST HTTP

### Colonne 6: ğŸŸ  AWS Lambda (Orange AWS)
- **Service AWS Lambda** - Couleur orange pour identification
- Code Lambda Function
- Function URL HTTPS (proxy)
- CORS configurÃ©

### Colonne 7: Frontend
- Code React
- DÃ©ploiement Amplify
- Interface utilisateur

### Colonne 8: Monitoring
- CloudWatch
- Grafana Cloud

## LÃ©gende des Couleurs et Symboles

- ğŸ‘¤ **Utilisateur** : Personne utilisant l'application
- ğŸ” **IAM** : Gestion des accÃ¨s et permissions AWS
- ğŸ““ **Notebook** : Jupyter Notebook pour ML
- ğŸ“Š **DonnÃ©es** : Datasets et fichiers CSV
- âš™ï¸ **Configuration** : ParamÃ¨tres et configuration
- ğŸ‹ï¸ **Training** : EntraÃ®nement du modÃ¨le ML
- ğŸ“¦ **Artifact** : ModÃ¨le sauvegardÃ©
- ğŸ¤– **Model** : ModÃ¨le SageMaker
- ğŸš€ **Endpoint** : Point d'accÃ¨s pour prÃ©dictions
- ğŸ’» **Code** : Code source de l'application
- ğŸ“¤ **DÃ©ploiement** : Processus de dÃ©ploiement
- ğŸŒ **API** : Interface de programmation
- âš¡ **Lambda** : Fonction serverless
- ğŸ”— **URL** : Point d'entrÃ©e HTTPS
- âš›ï¸ **React** : Framework frontend
- ğŸŒ **Web** : Application web
- ğŸ“Š **Monitoring** : Surveillance et mÃ©triques
- ğŸ“ˆ **Visualisation** : Dashboards et graphiques

## Flux de DonnÃ©es DÃ©taillÃ©

### 1. Phase ML (PrÃ©requis)
```
IAM User â†’ IAM Role â†’ Notebook â†’ DonnÃ©es â†’ S3 â†’ Training â†’ Model â†’ Endpoint
```

### 2. Phase Infrastructure
```
Backend Code â†’ Elastic Beanstalk â†’ API HTTP
Lambda Code â†’ Lambda Function â†’ Function URL HTTPS
React Code â†’ Amplify â†’ Frontend HTTPS
```

### 3. Flux Production (RequÃªte)
```
User â†’ Frontend â†’ Lambda URL â†’ Lambda â†’ Backend â†’ SageMaker â†’ ML Model
```

### 4. Flux Production (RÃ©ponse)
```
ML Model â†’ SageMaker â†’ Backend â†’ Lambda â†’ Lambda URL â†’ Frontend â†’ User
```

### 5. Flux Monitoring
```
Backend â†’ CloudWatch â†’ Grafana
Lambda â†’ CloudWatch â†’ Grafana
```

## Points ClÃ©s de l'Architecture

### SÃ©curitÃ©
- âœ… **HTTPS** : Frontend â†’ Lambda (via Function URL)
- âœ… **HTTP** : Lambda â†’ Backend (proxy interne)
- âœ… **IAM** : Permissions granulaires pour chaque service
- âœ… **CORS** : ConfigurÃ© dans Lambda et Backend

### Performance
- âš¡ **Lambda** : RÃ©ponse rapide (< 1s)
- âš¡ **SageMaker** : PrÃ©diction en temps rÃ©el
- âš¡ **Amplify** : CDN global pour frontend

### ScalabilitÃ©
- ğŸ“ˆ **Elastic Beanstalk** : Auto-scaling disponible
- ğŸ“ˆ **Lambda** : Scaling automatique
- ğŸ“ˆ **SageMaker** : Multi-instance support

### Monitoring
- ğŸ“Š **CloudWatch** : MÃ©triques en temps rÃ©el
- ğŸ“Š **Grafana** : Visualisation avancÃ©e
- ğŸ“Š **Logs** : TraÃ§abilitÃ© complÃ¨te

## Checklist de DÃ©ploiement

### âœ… Phase 1: IAM
- [ ] CrÃ©er IAM User avec Access Keys
- [ ] CrÃ©er IAM Role pour SageMaker
- [ ] VÃ©rifier permissions S3 et SageMaker

### âœ… Phase 2: ML Preparation
- [ ] ExÃ©cuter toutes les cellules du notebook
- [ ] VÃ©rifier train.csv et test.csv crÃ©Ã©s
- [ ] VÃ©rifier upload S3 rÃ©ussi

### âœ… Phase 3: Training
- [ ] VÃ©rifier Training Job complÃ©tÃ©
- [ ] VÃ©rifier Model Artifact dans S3
- [ ] VÃ©rifier accuracy > 90%

### âœ… Phase 4: Endpoint
- [ ] VÃ©rifier endpoint dÃ©ployÃ© (Status: InService)
- [ ] Tester endpoint avec prÃ©dictions
- [ ] âš ï¸ **Supprimer endpoint aprÃ¨s test** (coÃ»ts!)

### âœ… Phase 5: Backend
- [ ] DÃ©ployer sur Elastic Beanstalk
- [ ] Configurer variables d'environnement
- [ ] Tester API avec curl/PowerShell

### âœ… Phase 6: Proxy
- [ ] CrÃ©er Lambda Function
- [ ] CrÃ©er Function URL
- [ ] Configurer CORS
- [ ] Tester proxy

### âœ… Phase 7: Frontend
- [ ] DÃ©ployer sur Amplify
- [ ] Configurer REACT_APP_API_URL
- [ ] Tester interface complÃ¨te

### âœ… Phase 8: Monitoring
- [ ] VÃ©rifier mÃ©triques CloudWatch
- [ ] Configurer Grafana Cloud
- [ ] CrÃ©er dashboards
- [ ] Configurer alertes

## CoÃ»ts EstimÃ©s

| Service | CoÃ»t | Free Tier |
|---------|------|-----------|
| IAM | Gratuit | âœ… |
| S3 | Gratuit | âœ… (5GB) |
| SageMaker Training | ~$0.50 | âš ï¸ (ml.c5.xlarge) |
| SageMaker Endpoint | ~$0.05/heure | âš ï¸ **Supprimer aprÃ¨s test!** |
| Elastic Beanstalk | Gratuit | âœ… (t2.micro, 750h/mois) |
| Lambda | Gratuit | âœ… (1M requÃªtes/mois) |
| Amplify | Gratuit | âœ… (1000 builds/mois) |
| CloudWatch | Gratuit | âœ… (10 mÃ©triques, 5GB logs) |
| Grafana Cloud | Gratuit | âœ… (10GB logs, 10k mÃ©triques) |

**Total estimÃ©**: ~$0.50 + coÃ»t endpoint (supprimer aprÃ¨s test!)

## Technologies Stack

### ML & Data
- **Scikit-learn**: RandomForest Classifier
- **Pandas**: Data manipulation
- **SageMaker**: ML training & deployment

### Backend
- **Node.js**: Runtime
- **Express**: Web framework
- **AWS SDK v2**: AWS services integration

### Frontend
- **React 19**: UI framework
- **Tailwind CSS**: Styling
- **Lucide Icons**: Icons

### Infrastructure
- **AWS Amplify**: Frontend hosting
- **Elastic Beanstalk**: Backend hosting
- **Lambda**: Serverless proxy
- **SageMaker**: ML endpoint

### Monitoring
- **CloudWatch**: Metrics & logs
- **Grafana Cloud**: Visualization

## Commandes Utiles

### Tester Backend
```powershell
$body = '{"endpointName":"fraud-detection-model-*","features":[0.0,-1.359807,...]}'
Invoke-WebRequest -Uri "http://frauddetection-env.eba-*.us-east-1.elasticbeanstalk.com/api/predict" -Method POST -Body $body -ContentType "application/json"
```

### Tester Lambda Proxy
```powershell
Invoke-WebRequest -Uri "https://*.lambda-url.us-east-1.on.aws/api/predict" -Method POST -Body $body -ContentType "application/json"
```

### Supprimer Endpoint (Important!)
```python
predictor.delete_endpoint()
```

## Notes Importantes

âš ï¸ **CoÃ»ts SageMaker Endpoint**: L'endpoint facture tant qu'il est actif. Supprimer aprÃ¨s les tests!

âš ï¸ **IAM Permissions**: S'assurer que le rÃ´le SageMaker a les permissions S3 et SageMaker.

âš ï¸ **HTTPS**: Le frontend (HTTPS) ne peut pas appeler le backend (HTTP) directement. Utiliser Lambda Function URL.

âš ï¸ **CORS**: Configurer CORS dans Lambda et Backend pour permettre les requÃªtes cross-origin.

âœ… **Free Tier**: La plupart des services sont dans le Free Tier AWS.

âœ… **Monitoring**: CloudWatch et Grafana Cloud offrent des plans gratuits gÃ©nÃ©reux.

